# This script is intended to be source'd, not executed

set -e

REPO_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

pip install -v ${REPO_DIR}/extern/awex ${REPO_DIR}/extern/pygotm ${REPO_DIR}/python

WORK_DIR=`mktemp -d`

cmake -S ${REPO_DIR}/extern/pygsw -B ${WORK_DIR} -DCMAKE_BUILD_TYPE=Release
cmake --build ${WORK_DIR} --target install --config Release --parallel 4

rm -rf ${WORK_DIR}/*
cmake -S ${REPO_DIR}/extern/python-otps2 -B ${WORK_DIR} -DCMAKE_BUILD_TYPE=Release
cmake --build ${WORK_DIR} --target install --config Release --parallel 4

rm -rf ${WORK_DIR}
